<mxfile host="drawio-plugin" modified="2023-09-28T08:12:05.707Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36" etag="vvtR73mNu4D_MRqvg3et" version="20.5.3" type="embed" pages="3"><diagram id="C5RBs43oDa-KdzZeNtuy" name="总流程"><mxGraphModel dx="2651" dy="980" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="WIyWlLk6GJQsqaUBKTNV-0"/><mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0"/><mxCell id="WIyWlLk6GJQsqaUBKTNV-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="280" y="170" as="targetPoint"/></mxGeometry></mxCell><mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="客户端A" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#CCE5FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="80" width="120" height="40" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="279.5" y="230" as="sourcePoint"/><mxPoint x="279.5" y="290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7RlUj_piEzG3KWm9b5ct-18" target="4_GKTPMX8tLgz5SM1xPS-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-18" value="数据写入writeBuffer" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="50" y="900" width="130" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-25" value="rcv_buf" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1320" y="1580" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-27" value="rcv_queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1170" y="1680" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-30" value="连接服务端&lt;br&gt;joinRoom" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="170" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-45" value="&lt;h1&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;步骤说明：&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;ol style=&quot;line-height: 160%;&quot;&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;服务端初始化，等待客户端连接。&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;font color=&quot;#ff6666&quot;&gt;客户端初始化&lt;/font&gt;后，连接指定服务端，发送指定数据，&lt;/font&gt;会触发 写事件，启动写线程去把 data -&amp;gt; write_buffer -&amp;gt; snd_queue -&amp;gt; snd_buf 中，传输到服务端。&lt;/li&gt;&lt;li&gt;此时会启动一个线程去执行一个时间轮，即每隔多长时间执行一个任务，任务作用是检查UKCP的时间和自己的定时时间，如果可以发送，则直接发送，时间延后则重新定时，定时任务成功后，检测 写缓冲区，检查是否 需要触发写事件。&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff6666&quot;&gt;服务端收到 data后&lt;/font&gt;，会触发 读事件，启动读线程去 读 read_buffer -&amp;gt; rec_buf -&amp;gt; rcv_queue -&amp;gt; data，进行输出。&lt;/li&gt;&lt;li&gt;此时 同步骤4，会启动相同的时间轮，不过这次是在服务端执行。服务端判断。。，会发送ack包到客户端（链路和客户端-&amp;gt; 服务端一致），客户端接收到ack包，会根据ack包的时间计算 SRTT（平滑RTT） 和 RTO（重传超时）。&lt;br&gt;&lt;/li&gt;&lt;li&gt;至此，一次客户端-&amp;gt;服务端的单向 数据发送才算完成。&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1310" y="60" width="610" height="545" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-12" target="uy-A_jskTljX30a1A5Q1-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-12" value="等待用户匹配" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="290" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-14" value="匹配成功（此刻房间内有两人）" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="420" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-20" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="30" y="516" as="sourcePoint"/><mxPoint x="275" y="516" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-26" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;direction=south;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="115" y="480" width="330" height="125" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-27" value="开始推流、开始拉流" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="70" y="480" width="130" height="30" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-31" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="115" y="730" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-31" value="发送自定义音频采集 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFB366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="55" y="605" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-34" target="7RlUj_piEzG3KWm9b5ct-18" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-34" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-45" y="780" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-34" value="判断写入缓冲区大小" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="35" y="730" width="160" height="100" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-36" value="缓冲区够用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="115" y="850" width="80" height="30" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-0" value="缓冲区不够用，禁止后续数据写入，防止OOM" style="whiteSpace=wrap;html=1;fillColor=#FF6666;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-175" y="750" width="130" height="60" as="geometry"/></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="nYXH_iECZiatbJGzT019-53" target="J_CyLGGVV-6lv8dVLBiA-3" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="115" y="1370" as="targetPoint"/></mxGeometry></mxCell><mxCell id="nYXH_iECZiatbJGzT019-53" value="数据写入sndQue" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="50" y="1240" width="130" height="60" as="geometry"/></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="4_GKTPMX8tLgz5SM1xPS-0" target="nYXH_iECZiatbJGzT019-53" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-4" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="kv0YCAP0Hw6sKMFOcy_a-3" vertex="1" connectable="0"><mxGeometry x="-0.2626" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="4_GKTPMX8tLgz5SM1xPS-0" value="sndBuf + sndQue &amp;lt; sndWnd" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="20" y="1040" width="190" height="110" as="geometry"/></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-0" value="&lt;p style=&quot;line-height: 140%;&quot;&gt;&lt;/p&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndBuff：发送后待确认的队列&lt;br&gt;&lt;/font&gt;&lt;p style=&quot;line-height: 70%; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndQueue：待发送窗口&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 70%; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndwnd：发送窗口大小&lt;/font&gt;&lt;br&gt;&lt;/p&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-315" y="1050" width="210" height="90" as="geometry"/></mxCell><mxCell id="kv0YCAP0Hw6sKMFOcy_a-2" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="kv0YCAP0Hw6sKMFOcy_a-0" target="4_GKTPMX8tLgz5SM1xPS-0" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-85" y="1230" as="sourcePoint"/><mxPoint x="-35" y="1180" as="targetPoint"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.334;entryY=0.016;entryDx=0;entryDy=0;entryPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-3" target="J_CyLGGVV-6lv8dVLBiA-8" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-37" value="发送数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="J_CyLGGVV-6lv8dVLBiA-36" vertex="1" connectable="0"><mxGeometry x="-0.2898" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><UserObject label="是否执行flush方法" link="data:page/id,0Pnds2KYlQipTJeYvXms" id="J_CyLGGVV-6lv8dVLBiA-3"><mxCell style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="15.759999999999991" y="1390" width="200" height="130" as="geometry"/></mxCell></UserObject><mxCell id="J_CyLGGVV-6lv8dVLBiA-4" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;将需要发送的数据包进行整理和封装，然后发送出去， 同时进行一些流控、拥塞控制等机制的处理。&lt;/font&gt;" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;fontColor=#333333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-345" y="1360" width="232" height="90" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-5" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-123.25000000000023" y="1454.5799999999997" as="sourcePoint"/><mxPoint x="14.88000000000011" y="1454.5799999999997" as="targetPoint"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-6" value="&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;【sndBuf】+ 【sndQueue&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;】&amp;lt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;sndwnd&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 13px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 13px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;ackCount &amp;gt; 0&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 13px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 13px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;sndBuf.size() &amp;gt;0&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;blockquote style=&quot;margin: 0px 0px 0px 40px; border: none; padding: 0px; font-size: 13px;&quot;&gt;&lt;/blockquote&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;text-align: center;&quot;&gt;sndQueue.size() &amp;gt; 0&lt;/span&gt;&lt;/font&gt;" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;fontColor=#333333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-344.25" y="1450" width="231" height="130" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-8" target="J_CyLGGVV-6lv8dVLBiA-14" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="444" y="1510"/><mxPoint x="444" y="1510"/></Array></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-19" value="接收数据" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="J_CyLGGVV-6lv8dVLBiA-17" vertex="1" connectable="0"><mxGeometry x="0.251" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-8" value="中继服务器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#99FFFF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-175" y="1640" width="870" height="60" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-11" target="J_CyLGGVV-6lv8dVLBiA-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><UserObject label="数据读入readBuffer" link="data:page/id,Gp3b3WBZSqf-lGHbitcD" id="J_CyLGGVV-6lv8dVLBiA-11"><mxCell style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="378.75" y="1240" width="130" height="60" as="geometry"/></mxCell></UserObject><mxCell id="J_CyLGGVV-6lv8dVLBiA-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-14" target="J_CyLGGVV-6lv8dVLBiA-16" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="283.75" y="1350" as="targetPoint"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-21" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-14" target="J_CyLGGVV-6lv8dVLBiA-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-22" value="缓冲区够用" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="J_CyLGGVV-6lv8dVLBiA-21" vertex="1" connectable="0"><mxGeometry x="0.1976" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><UserObject label="判断写入缓冲区大小" id="J_CyLGGVV-6lv8dVLBiA-14"><mxCell style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="363.75" y="1390" width="160" height="100" as="geometry"/></mxCell></UserObject><mxCell id="J_CyLGGVV-6lv8dVLBiA-16" value="缓冲区不够用，禁止后续数据写入，防止OOM" style="whiteSpace=wrap;html=1;fillColor=#FF6666;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="648.75" y="1410" width="130" height="60" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-23" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="443.75" y="1030" as="targetPoint"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-23" value="遍历readBuffer，&lt;br&gt;执行input方法" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="378.75" y="1100" width="130" height="60" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-25" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;将需要发。&lt;/font&gt;" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;fontColor=#333333;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="630" y="1085" width="232" height="90" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-27" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-23" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="383.75" y="1090" as="sourcePoint"/><mxPoint x="633.75" y="1130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-31" target="J_CyLGGVV-6lv8dVLBiA-32" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-31" value="从 SDK 取远端拉流自定义音频渲染 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFB366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="372.75" y="970" width="145" height="60" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="J_CyLGGVV-6lv8dVLBiA-32" target="J_CyLGGVV-6lv8dVLBiA-34" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-32" value="判断写入缓冲区不为空&lt;br&gt;并且&lt;br&gt;sndBuf + sndQue &amp;lt; sndWnd" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="324" y="760" width="241.5" height="130" as="geometry"/></mxCell><mxCell id="J_CyLGGVV-6lv8dVLBiA-34" value="执行写任务" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="379.75" y="605" width="130" height="60" as="geometry"/></mxCell></root></mxGraphModel></diagram><diagram name="flush方法" id="0Pnds2KYlQipTJeYvXms"><mxGraphModel dx="1896" dy="574" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-0"/><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-1" parent="9eq5Mcm6ay2aX8Y26_Fb-0"/><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-8" value="rcv_buf" style="rounded=0;whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="1320" y="1580" width="120" height="60" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-9" value="rcv_queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="1170" y="1680" width="120" height="60" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-11" value="&lt;h1&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;步骤说明：&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;ol style=&quot;line-height: 160%;&quot;&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;服务端初始化，等待客户端连接。&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;font color=&quot;#ff6666&quot;&gt;客户端初始化&lt;/font&gt;后，连接指定服务端，发送指定数据，&lt;/font&gt;会触发 写事件，启动写线程去把 data -&amp;gt; write_buffer -&amp;gt; snd_queue -&amp;gt; snd_buf 中，传输到服务端。&lt;/li&gt;&lt;li&gt;此时会启动一个线程去执行一个时间轮，即每隔多长时间执行一个任务，任务作用是检查UKCP的时间和自己的定时时间，如果可以发送，则直接发送，时间延后则重新定时，定时任务成功后，检测 写缓冲区，检查是否 需要触发写事件。&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff6666&quot;&gt;服务端收到 data后&lt;/font&gt;，会触发 读事件，启动读线程去 读 read_buffer -&amp;gt; rec_buf -&amp;gt; rcv_queue -&amp;gt; data，进行输出。&lt;/li&gt;&lt;li&gt;此时 同步骤4，会启动相同的时间轮，不过这次是在服务端执行。服务端判断。。，会发送ack包到客户端（链路和客户端-&amp;gt; 服务端一致），客户端接收到ack包，会根据ack包的时间计算 SRTT（平滑RTT） 和 RTO（重传超时）。&lt;br&gt;&lt;/li&gt;&lt;li&gt;至此，一次客户端-&amp;gt;服务端的单向 数据发送才算完成。&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="1310" y="60" width="610" height="545" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-34" target="9eq5Mcm6ay2aX8Y26_Fb-38" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-34" value="sndNxt &amp;lt; (sndUna + cwnd0)" style="rhombus;whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="45.01999999999998" y="2000" width="189.99" height="110" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-35" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1.004;exitY=0.432;exitDx=0;exitDy=0;exitPerimeter=0;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-36" target="9eq5Mcm6ay2aX8Y26_Fb-34" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-99.99000000000001" y="2004.46" as="sourcePoint"/><mxPoint x="20.00999999999999" y="2049.99" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-36" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;&lt;/p&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndNxt&amp;nbsp;：&lt;/font&gt;下次发送下标&lt;br&gt;sndUna&amp;nbsp;：已发送但未确认&lt;br&gt;rmtWnd：当前对端可接收窗口&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;cwnd0：【sndWnd，rmtWnd&lt;span style=&quot;font-size: 13px; background-color: initial;&quot;&gt;】最小值&lt;/span&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="-300" y="2004" width="210" height="116" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-37" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-38" target="9eq5Mcm6ay2aX8Y26_Fb-66" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-38" value="数据写入sndBuf" style="whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="72.51999999999998" y="2190" width="135" height="60" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-50" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="139.01" y="1630.0034212326964" as="targetPoint"/><mxPoint x="139.01" y="1540" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-56" value="&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;接收端收到 一次&amp;nbsp; 【IKCP_CMD_PUSH】指&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;令的数据包，ackCount +1，ackList[0] 设置&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;SN，ackList[1] 设置 ts 时间&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;1、遍历 ackList数组，获取 每个位置的 sn；&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;2、 针对sn &amp;gt; rcvNxt的数据，&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;span style=&quot;background-color: initial; font-size: 13px;&quot;&gt;ackMask |= 1&amp;lt;&amp;lt; index&lt;/span&gt;&lt;/p&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="-354.5" y="1590" width="264.5" height="175" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-59" target="9eq5Mcm6ay2aX8Y26_Fb-61" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-59" value="针对已读取的数据 &lt;br&gt;回复ack响应" style="whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="55" y="1630" width="170" height="70" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-60" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-61" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="140" y="2000.0065" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-61" value="封装ack响应消息" style="whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="51.5" y="1844" width="176.5" height="70" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-62" value="&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;1、遍历 ackList数组，获取 每个位置的 sn；&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;2、 针对sn &amp;gt;= rcvNxt || ackCount-1 = index&amp;nbsp;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 80%;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;的数据，回复ack&lt;/font&gt;&lt;/p&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="-351.5" y="1819" width="264.5" height="120" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-63" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-66.63000000000011" y="1878.58" as="sourcePoint"/><mxPoint x="51.5" y="1879" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-64" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-84.63000000000022" y="1664.57" as="sourcePoint"/><mxPoint x="53.50000000000011" y="1664.57" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-65" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-66" target="9eq5Mcm6ay2aX8Y26_Fb-69" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-66" value="遍历sndBuf，将数据发送" style="whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="66.28" y="2330" width="147.48" height="60" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-67" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;&lt;/p&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;主要包含四类数据：&lt;br&gt;1、初次写入的新数据&lt;br&gt;2、超过自定义快速重传次数的数据&lt;br&gt;3、重传后未响应的早期数据&lt;br&gt;4、超过 超时重传时间的数据&lt;br&gt;&lt;/span&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="-314" y="2300" width="227" height="120" as="geometry"/></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-68" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" source="9eq5Mcm6ay2aX8Y26_Fb-67" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-67.90000000000008" y="2360.002" as="sourcePoint"/><mxPoint x="66.28000000000021" y="2360.89" as="targetPoint"/></mxGeometry></mxCell><mxCell id="9eq5Mcm6ay2aX8Y26_Fb-69" value="拥塞控制&lt;br&gt;发送待确认窗口大小" style="whiteSpace=wrap;html=1;" parent="9eq5Mcm6ay2aX8Y26_Fb-1" vertex="1"><mxGeometry x="66.27999999999999" y="2470" width="147.48" height="60" as="geometry"/></mxCell><mxCell id="xHmQGsa7irxipEsPjWhQ-0" value="flush方法" style="whiteSpace=wrap;html=1;" vertex="1" parent="9eq5Mcm6ay2aX8Y26_Fb-1"><mxGeometry x="74.74999999999999" y="1480" width="130" height="60" as="geometry"/></mxCell></root></mxGraphModel></diagram><diagram name="input方法" id="Gp3b3WBZSqf-lGHbitcD"><mxGraphModel dx="2175" dy="1893" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="Ot1NCtjxuuN7USSTNFht-0"/><mxCell id="Ot1NCtjxuuN7USSTNFht-1" parent="Ot1NCtjxuuN7USSTNFht-0"/><mxCell id="eGjnJ9m8IKkYnueNPYXq-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="Ot1NCtjxuuN7USSTNFht-1" target="Ot1NCtjxuuN7USSTNFht-46" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="488" y="580" as="sourcePoint"/><Array as="points"><mxPoint x="488" y="650"/><mxPoint x="160" y="650"/></Array></mxGeometry></mxCell><mxCell id="eGjnJ9m8IKkYnueNPYXq-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-44" target="Ot1NCtjxuuN7USSTNFht-47" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="488" y="650"/><mxPoint x="394" y="650"/></Array></mxGeometry></mxCell><mxCell id="eGjnJ9m8IKkYnueNPYXq-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-44" target="eGjnJ9m8IKkYnueNPYXq-0" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="488" y="650"/><mxPoint x="589" y="650"/></Array></mxGeometry></mxCell><mxCell id="eGjnJ9m8IKkYnueNPYXq-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-44" target="eGjnJ9m8IKkYnueNPYXq-1" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="488" y="650"/><mxPoint x="767" y="650"/></Array></mxGeometry></mxCell><mxCell id="Ot1NCtjxuuN7USSTNFht-44" value="重置sndUna值" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="414" y="510" width="142.5" height="60" as="geometry"/></mxCell><mxCell id="lo-VEtORhWPTIpuH2x-G-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-46" target="lo-VEtORhWPTIpuH2x-G-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="Ot1NCtjxuuN7USSTNFht-46" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;IKCP_CMD_ACK&lt;/font&gt;" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="100" y="730" width="120" height="60" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-47" target="JLVxqBScB3tX8snwsshE-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="Ot1NCtjxuuN7USSTNFht-47" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;IKCP_CMD_PUSH&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="334" y="720" width="120" height="60" as="geometry"/></mxCell><mxCell id="eGjnJ9m8IKkYnueNPYXq-0" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;IKCP_CMD_WASK&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="529" y="720" width="120" height="60" as="geometry"/></mxCell><mxCell id="eGjnJ9m8IKkYnueNPYXq-1" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;IKCP_CMD_WINS&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="707" y="720" width="120" height="60" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=12;" parent="Ot1NCtjxuuN7USSTNFht-1" source="TWFSLqL9K1Sf8EBoPedw-0" target="JLVxqBScB3tX8snwsshE-7" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="TWFSLqL9K1Sf8EBoPedw-0" value="input方法" style="rounded=0;whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="425.5" y="-100" width="120" height="60" as="geometry"/></mxCell><mxCell id="3oaB8UPHMvtrLA7Q50Ca-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" source="lo-VEtORhWPTIpuH2x-G-0" target="3oaB8UPHMvtrLA7Q50Ca-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-22" value="&lt;span style=&quot;color: rgb(51, 51, 51); text-align: left; background-color: rgb(248, 249, 250);&quot;&gt;在出现丢包情况下生效&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" parent="3oaB8UPHMvtrLA7Q50Ca-1" vertex="1" connectable="0"><mxGeometry x="-0.2814" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="lo-VEtORhWPTIpuH2x-G-0" value="sn &amp;gt;= sndUna &lt;br&gt;&amp;amp;&amp;amp;&lt;br&gt;&amp;nbsp;sn &amp;lt; sndNxt" style="rhombus;whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="58" y="860" width="202.5" height="110" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="3oaB8UPHMvtrLA7Q50Ca-0" target="JLVxqBScB3tX8snwsshE-16" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="3oaB8UPHMvtrLA7Q50Ca-0" value="sndBuf中 删除&amp;nbsp;&lt;b&gt; 等于SN&lt;/b&gt; 的数据包" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="57" y="1050" width="205" height="60" as="geometry"/></mxCell><mxCell id="r-0mC1ah7xgo7FYs9beN-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" source="r-0mC1ah7xgo7FYs9beN-0" target="Ot1NCtjxuuN7USSTNFht-44" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="r-0mC1ah7xgo7FYs9beN-0" value="sndBuf中 删掉 sn&amp;lt; una 的数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="414" y="390" width="142.5" height="60" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-1" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.045;entryY=0.7;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryPerimeter=0;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Ot1NCtjxuuN7USSTNFht-44" target="JLVxqBScB3tX8snwsshE-0" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="600" y="640" as="sourcePoint"/><mxPoint x="650" y="590" as="targetPoint"/></mxGeometry></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-2" value="&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;sub style=&quot;&quot;&gt;&lt;font style=&quot;font-size: 12px;&quot;&gt;sndUna：已发送但未确认&lt;/font&gt;&lt;/sub&gt;&lt;/span&gt;&lt;/div&gt;" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontColor=#333333;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="660" y="430" width="220" height="40" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-0" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;&lt;/p&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;sndBuf 不为空：&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;sndUna = 第一个元素的sn&lt;br&gt;否则：&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;snaUna= sndNxt&lt;br&gt;&lt;/span&gt;" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontColor=#333333;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="660" y="470" width="220" height="100" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="JLVxqBScB3tX8snwsshE-7" target="JLVxqBScB3tX8snwsshE-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-7" value="&lt;font style=&quot;font-size: 13px;&quot;&gt;读取消息头数据：&lt;br&gt;&lt;/font&gt;&lt;ul style=&quot;font-size: 13px;&quot;&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;cmd ：指令&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;frg ：&lt;/font&gt;分片ID&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;wnd ：&lt;/font&gt;剩余接收窗口大小&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;ts ：相对时间截&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sn ：消息序号&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;una：&lt;/font&gt;待接收消息序号&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;ackMask ：掩码数据&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;.......&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="353.32" y="30" width="264.37" height="180" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-13" value="&lt;div style=&quot;&quot;&gt;&lt;/div&gt;rmtWnd：当前对端可接收窗口" style="text;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fontColor=#333333;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="657" y="270" width="223" height="40" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-14" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0.045;entryY=0.7;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryPerimeter=0;" parent="Ot1NCtjxuuN7USSTNFht-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="546.6" y="289.58000000000004" as="sourcePoint"/><mxPoint x="660.0000000000001" y="289.58000000000004" as="targetPoint"/></mxGeometry></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="JLVxqBScB3tX8snwsshE-11" target="r-0mC1ah7xgo7FYs9beN-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-11" value="重置rmtWnd值&lt;br&gt;rmtWnd= wnd" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f0a30a;strokeColor=#BD7000;fontColor=#000000;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="417" y="260" width="136.76" height="60" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.063;entryY=-0.021;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="JLVxqBScB3tX8snwsshE-16" target="jjc_BDncWxLsWNb6SJcM-9"><mxGeometry relative="1" as="geometry"><mxPoint x="159.50000000000023" y="1750" as="targetPoint"/></mxGeometry></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-16" value="&lt;p style=&quot;line-height: 120%;&quot;&gt;将sndBuf中&amp;nbsp; 把 &amp;lt; ts 的包的&lt;/p&gt;&lt;span style=&quot;font-size: 13px; text-align: left;&quot;&gt;fastack&lt;/span&gt;&lt;span style=&quot;background-color: initial;&quot;&gt;&amp;nbsp;+1&lt;/span&gt;&lt;span style=&quot;font-size: 13px; text-align: left;&quot;&gt;&lt;br&gt;&lt;/span&gt;" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="57" y="1190" width="205" height="60" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-20" value="" style="endArrow=none;dashed=1;html=1;rounded=0;fontSize=13;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="Ot1NCtjxuuN7USSTNFht-1" target="JLVxqBScB3tX8snwsshE-16" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-70" y="1220" as="sourcePoint"/><mxPoint x="10" y="1330" as="targetPoint"/></mxGeometry></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-19" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;&lt;/p&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;fastack：&lt;/span&gt;&lt;span style=&quot;text-align: center;&quot;&gt;ack跳过次数&lt;/span&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&lt;br&gt;作用：&lt;br&gt;&lt;span style=&quot;&quot;&gt;&#9;&lt;/span&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;根据时间判断&amp;nbsp; 在当前包时间之前的包才能被认定是需要快速重传的。&lt;br&gt;&lt;br&gt;情况：&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 13px;&quot;&gt;&#9;&lt;span style=&quot;white-space: pre;&quot;&gt;&#9;&lt;/span&gt;此时 生效的包的 sn 可能 大于 当前包 sn，意味着 这些包还未被发送，需要快速重传。&lt;/span&gt;" style="text;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;fontColor=#333333;strokeColor=#666666;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="-260" y="1127.5" width="240" height="165" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="JLVxqBScB3tX8snwsshE-23" target="JLVxqBScB3tX8snwsshE-25" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-1" value="防止由于丢包导致实际接收数量 != 接收上限" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="JLVxqBScB3tX8snwsshE-26"><mxGeometry x="-0.2004" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-23" value="sn &amp;lt; (rcvNxt + rcvWnd)" style="rhombus;whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="294" y="860" width="200" height="110" as="geometry"/></mxCell><mxCell id="Zl8rxIe3AJ2l9x3eqDr6-1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;" parent="Ot1NCtjxuuN7USSTNFht-1" source="JLVxqBScB3tX8snwsshE-25" target="Zl8rxIe3AJ2l9x3eqDr6-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="JLVxqBScB3tX8snwsshE-25" value="ackList[ ] 添加元素，sn、ts&amp;nbsp;&amp;nbsp;&lt;br&gt;ackCount +1" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="306" y="1050" width="176" height="60" as="geometry"/></mxCell><mxCell id="Zl8rxIe3AJ2l9x3eqDr6-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=13;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="Ot1NCtjxuuN7USSTNFht-1" source="Zl8rxIe3AJ2l9x3eqDr6-0" edge="1" target="Zl8rxIe3AJ2l9x3eqDr6-5"><mxGeometry relative="1" as="geometry"><mxPoint x="394" y="1350" as="targetPoint"/></mxGeometry></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-7" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="Zl8rxIe3AJ2l9x3eqDr6-3"><mxGeometry x="-0.1973" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="Zl8rxIe3AJ2l9x3eqDr6-0" value="sn &amp;gt;= rcvNxt" style="rhombus;whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="294" y="1169" width="200" height="110" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="Zl8rxIe3AJ2l9x3eqDr6-5" target="jjc_BDncWxLsWNb6SJcM-3"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-5" value="遍历rcvBuf" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="jjc_BDncWxLsWNb6SJcM-4"><mxGeometry x="-0.1595" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="Zl8rxIe3AJ2l9x3eqDr6-5" value="不重复的sn数据包添加到 rcvBuf中" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="297" y="1330" width="194" height="60" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="Zl8rxIe3AJ2l9x3eqDr6-7" target="jjc_BDncWxLsWNb6SJcM-9"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="394" y="1780"/><mxPoint x="394" y="1780"/></Array></mxGeometry></mxCell><mxCell id="Zl8rxIe3AJ2l9x3eqDr6-7" value="符合条件的转移到rcvQue 中，&lt;br&gt;rcvNxt +1" style="whiteSpace=wrap;html=1;" parent="Ot1NCtjxuuN7USSTNFht-1" vertex="1"><mxGeometry x="297" y="1640" width="194" height="60" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="jjc_BDncWxLsWNb6SJcM-3" target="Zl8rxIe3AJ2l9x3eqDr6-7"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-8" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="jjc_BDncWxLsWNb6SJcM-6"><mxGeometry x="-0.2674" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-3" value="sn == rcvNxt&amp;nbsp;&lt;br&gt;&amp;amp;&amp;amp;&lt;br&gt;rcvQue.size() &amp;lt; rcvWnd" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="Ot1NCtjxuuN7USSTNFht-1"><mxGeometry x="294" y="1470" width="200" height="110" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="jjc_BDncWxLsWNb6SJcM-9" target="jjc_BDncWxLsWNb6SJcM-14"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-9" value="解析ackMask ，移除sndBuf 中已经确认的分段，减少ACK包的发送频率" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" vertex="1" parent="Ot1NCtjxuuN7USSTNFht-1"><mxGeometry x="110" y="1800" width="790" height="70" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="jjc_BDncWxLsWNb6SJcM-14" target="jjc_BDncWxLsWNb6SJcM-16"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-20" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="jjc_BDncWxLsWNb6SJcM-17"><mxGeometry x="-0.2331" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-14" value="发送速率 &amp;gt; 读取速率" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" vertex="1" parent="Ot1NCtjxuuN7USSTNFht-1"><mxGeometry x="432.5" y="1960" width="145" height="80" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="Ot1NCtjxuuN7USSTNFht-1" source="jjc_BDncWxLsWNb6SJcM-16" target="jjc_BDncWxLsWNb6SJcM-18"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-21" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="jjc_BDncWxLsWNb6SJcM-19"><mxGeometry x="-0.232" y="2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-16" value="拥塞窗口 &amp;lt; 当前对端可接收窗口" style="rhombus;whiteSpace=wrap;html=1;rounded=0;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" vertex="1" parent="Ot1NCtjxuuN7USSTNFht-1"><mxGeometry x="401.25" y="2110" width="207.5" height="90" as="geometry"/></mxCell><mxCell id="jjc_BDncWxLsWNb6SJcM-18" value="根据拥塞算法，动态设置 拥塞窗口 cwnd" style="whiteSpace=wrap;html=1;rounded=0;fillColor=#f0a30a;fontColor=#000000;strokeColor=#BD7000;" vertex="1" parent="Ot1NCtjxuuN7USSTNFht-1"><mxGeometry x="445" y="2270" width="120" height="60" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>