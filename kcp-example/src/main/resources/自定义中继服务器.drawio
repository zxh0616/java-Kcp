<mxfile host="drawio-plugin" modified="2023-09-22T10:00:01.165Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36" etag="z3uJl_6gG1FGzl7oh94r" version="20.5.3" type="embed"><diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1"><mxGraphModel dx="2119" dy="694" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="WIyWlLk6GJQsqaUBKTNV-0"/><mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0"/><mxCell id="WIyWlLk6GJQsqaUBKTNV-2" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="WIyWlLk6GJQsqaUBKTNV-3" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="280" y="170" as="targetPoint"/></mxGeometry></mxCell><mxCell id="WIyWlLk6GJQsqaUBKTNV-3" value="客户端A" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;fillColor=#CCE5FF;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="80" width="120" height="40" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="279.5" y="230" as="sourcePoint"/><mxPoint x="279.5" y="290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-38" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="7RlUj_piEzG3KWm9b5ct-18" target="uy-A_jskTljX30a1A5Q1-37" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-18" value="数据写入writeBufferQueue" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="75" y="900" width="130" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-77" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="AqXx-wp8Mtv9Spylejte-5" target="uy-A_jskTljX30a1A5Q1-76" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="470" y="1820" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-25" value="rcv_buf" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1320" y="1580" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-27" value="rcv_queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1170" y="1680" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-30" value="连接服务端&lt;br&gt;joinRoom" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="170" width="120" height="60" as="geometry"/></mxCell><mxCell id="7RlUj_piEzG3KWm9b5ct-45" value="&lt;h1&gt;&lt;font style=&quot;font-size: 24px;&quot;&gt;步骤说明：&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;font-size: 17px;&quot;&gt;&lt;ol style=&quot;line-height: 160%;&quot;&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;服务端初始化，等待客户端连接。&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 17px;&quot;&gt;&lt;font color=&quot;#ff6666&quot;&gt;客户端初始化&lt;/font&gt;后，连接指定服务端，发送指定数据，&lt;/font&gt;会触发 写事件，启动写线程去把 data -&amp;gt; write_buffer -&amp;gt; snd_queue -&amp;gt; snd_buf 中，传输到服务端。&lt;/li&gt;&lt;li&gt;此时会启动一个线程去执行一个时间轮，即每隔多长时间执行一个任务，任务作用是检查UKCP的时间和自己的定时时间，如果可以发送，则直接发送，时间延后则重新定时，定时任务成功后，检测 写缓冲区，检查是否 需要触发写事件。&lt;/li&gt;&lt;li&gt;&lt;font color=&quot;#ff6666&quot;&gt;服务端收到 data后&lt;/font&gt;，会触发 读事件，启动读线程去 读 read_buffer -&amp;gt; rec_buf -&amp;gt; rcv_queue -&amp;gt; data，进行输出。&lt;/li&gt;&lt;li&gt;此时 同步骤4，会启动相同的时间轮，不过这次是在服务端执行。服务端判断。。，会发送ack包到客户端（链路和客户端-&amp;gt; 服务端一致），客户端接收到ack包，会根据ack包的时间计算 SRTT（平滑RTT） 和 RTO（重传超时）。&lt;br&gt;&lt;/li&gt;&lt;li&gt;至此，一次客户端-&amp;gt;服务端的单向 数据发送才算完成。&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1310" y="60" width="610" height="545" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-1" value="" style="rounded=0;html=1;jettySize=auto;orthogonalLoop=1;fontSize=11;endArrow=block;endFill=0;endSize=8;strokeWidth=1;shadow=0;labelBackgroundColor=none;edgeStyle=orthogonalEdgeStyle;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-2" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="910" y="170" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-2" value="客户端B" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;glass=0;strokeWidth=1;shadow=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="850" y="80" width="120" height="40" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="909.5" y="230" as="sourcePoint"/><mxPoint x="909.5" y="290" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-11" value="连接服务端&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;joinRoom" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="850" y="170" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-12" target="uy-A_jskTljX30a1A5Q1-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-12" value="等待用户匹配" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="290" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-13" target="uy-A_jskTljX30a1A5Q1-16" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-13" value="等待用户匹配" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="850" y="290" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-14" value="匹配成功（此刻房间内有两人）" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="220" y="420" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-16" value="匹配成功（此刻房间内有两人）" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="845" y="420" width="130" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-20" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="30" y="516" as="sourcePoint"/><mxPoint x="275" y="516" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-23" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1185" y="520" as="sourcePoint"/><mxPoint x="915" y="520" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-25" value="开始推流、开始拉流" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="1005" y="490" width="130" height="30" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-26" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;direction=south;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="140" y="480" width="280" height="125" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-27" value="开始推流、开始拉流" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="70" y="480" width="130" height="30" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-29" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;direction=south;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="790" y="480" width="240" height="125" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-31" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="140" y="730" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-31" value="发送自定义音频采集 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFB366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="80" y="605" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-34" target="7RlUj_piEzG3KWm9b5ct-18" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-34" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-20" y="780" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-34" value="是否控制写入缓冲区大小" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="60" y="730" width="160" height="100" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-36" value="缓冲区够用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="140" y="850" width="80" height="30" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-37" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="140.0050000000001" y="1260" as="targetPoint"/></mxGeometry></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-37" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-161.85999999999945" y="1100.0000000000002" as="sourcePoint"/><mxPoint x="140" y="1360" as="targetPoint"/><Array as="points"><mxPoint x="-10" y="1100"/><mxPoint x="-10" y="1360"/><mxPoint x="44" y="1360"/></Array></mxGeometry></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-10" value="剩余发送空间不足" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;" parent="LInC3I_wT032AU-UvtLX-9" vertex="1" connectable="0"><mxGeometry x="-0.1882" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-37" value="判断【sndBuf】+ 【sndQueue&lt;span style=&quot;background-color: initial;&quot;&gt;】&lt;br&gt;&amp;lt;&amp;nbsp;&lt;/span&gt;sndwnd" style="rhombus;whiteSpace=wrap;html=1;align=center;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="28.129999999999995" y="1020" width="223.75" height="160" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-41" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" target="uy-A_jskTljX30a1A5Q1-37" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-110" y="1100" as="sourcePoint"/><mxPoint x="-60" y="1270" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-42" value="&lt;p style=&quot;line-height: 140%;&quot;&gt;&lt;/p&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndBuff：发送后待确认的队列&lt;br&gt;&lt;/font&gt;&lt;p style=&quot;line-height: 70%; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndQueue：待发送窗口&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;line-height: 70%; font-size: 13px;&quot;&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndwnd：发送窗口大小&lt;/font&gt;&lt;br&gt;&lt;/p&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-300" y="1055" width="210" height="90" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-52" value="确认可用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="140" y="1200" width="70" height="30" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-56" target="LInC3I_wT032AU-UvtLX-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-56" value="数据写入sndQueue" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="73.5" y="1260" width="130" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-57" value="针对已读取的数据 回复ack响应" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="902.5" y="1270" width="135" height="60" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-60" target="uy-A_jskTljX30a1A5Q1-66" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-60" value="sndNxt &amp;lt; (sndUna + cwnd0)" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="696.01" y="1940" width="189.99" height="110" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-62" value="" style="endArrow=none;dashed=1;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1.004;exitY=0.432;exitDx=0;exitDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" target="uy-A_jskTljX30a1A5Q1-60" edge="1" source="uy-A_jskTljX30a1A5Q1-63"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="551" y="1944.46" as="sourcePoint"/><mxPoint x="671" y="1989.99" as="targetPoint"/></mxGeometry></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-63" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;&lt;/p&gt;&lt;font style=&quot;font-size: 13px;&quot;&gt;sndNxt&amp;nbsp;：&lt;/font&gt;下次发送下标&lt;br&gt;sndUna&amp;nbsp;：已发送但未确认&lt;br&gt;rmtWnd：当前对端可接收窗口&lt;span style=&quot;background-color: initial;&quot;&gt;&lt;br&gt;&lt;/span&gt;cwnd0：【sndWnd，rmtWnd&lt;span style=&quot;font-size: 13px; background-color: initial;&quot;&gt;】最小值&lt;/span&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="356" y="1945.99" width="210" height="116" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-66" value="数据写入sndBuf" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="723.51" y="2130" width="135" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-67" value="从 SDK 取远端拉流自定义音频渲染 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="970" y="605" width="130" height="55" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-68" value="发送自定义音频采集 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="730" y="605" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-81" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-70" target="uy-A_jskTljX30a1A5Q1-80" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-70" value="readBuf" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="410" y="1470" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-78" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="uy-A_jskTljX30a1A5Q1-76" target="uy-A_jskTljX30a1A5Q1-70" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-76" value="是否控制读取缓冲区大小" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFFF99;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="390" y="1630" width="160" height="100" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-79" value="缓冲区够用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="470" y="1580" width="80" height="30" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-80" value="sndBuf中 删掉小于最新序列号sn的数据" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="410" y="1350" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-82" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_2;align=left;labelPosition=right;pointerEvents=1;direction=north;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="410" y="1250" width="120" height="100" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-84" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;IKCP_CMD_ACK&lt;/font&gt;" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="573" y="1070" width="120" height="60" as="geometry"/></mxCell><mxCell id="uy-A_jskTljX30a1A5Q1-85" value="&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;pre style=&quot;font-family: Consolas, monospace; font-size: 11.3pt;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255);&quot;&gt;IKCP_CMD_PUSH&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/pre&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="570" y="1190" width="120" height="60" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-0" value="缓冲区不够用，禁止后续数据写入，防止OOM" style="whiteSpace=wrap;html=1;fillColor=#FF6666;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="-130" y="750" width="130" height="60" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-4" value="从 SDK 取远端拉流自定义音频渲染 PCM 数据" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFB366;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="356" y="605" width="130" height="60" as="geometry"/></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="LInC3I_wT032AU-UvtLX-11" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="140" y="1630.0014999999996" as="sourcePoint"/><mxPoint x="140" y="1630" as="targetPoint"/></mxGeometry></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-14" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;" parent="LInC3I_wT032AU-UvtLX-13" vertex="1" connectable="0"><mxGeometry x="-0.0776" y="4" relative="1" as="geometry"><mxPoint x="-5" as="offset"/></mxGeometry></mxCell><mxCell id="LInC3I_wT032AU-UvtLX-11" value="判断是否需要发送数据&amp;nbsp;" style="rhombus;whiteSpace=wrap;html=1;fillColor=#E6FFCC;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="39.01" y="1410" width="200" height="130" as="geometry"/></mxCell><mxCell id="AqXx-wp8Mtv9Spylejte-0" value="将需要发送的数据包进行整理和封装，然后发送出去， 同时进行一些流控、拥塞控制等机制的处理。" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="650" y="1635" width="220" height="90" as="geometry"/></mxCell><mxCell id="AqXx-wp8Mtv9Spylejte-5" value="数据读取" style="whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1"><mxGeometry x="402.5" y="1824" width="135" height="60" as="geometry"/></mxCell><mxCell id="5" value="&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;【sndBuf】+ 【sndQueue&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;】&amp;lt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;background-color: initial; text-align: center;&quot;&gt;sndwnd&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;ackCount &amp;gt; 0&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;sndBuf.size() &amp;gt;0&lt;/span&gt;&lt;br&gt;&lt;blockquote style=&quot;margin: 0 0 0 40px; border: none; padding: 0px;&quot;&gt;&lt;/blockquote&gt;&lt;span style=&quot;text-align: center; background-color: initial;&quot;&gt;或&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;text-align: center;&quot;&gt;sndQueue.size() &amp;gt; 0&lt;/span&gt;" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1"><mxGeometry x="-330" y="1410" width="231" height="130" as="geometry"/></mxCell><mxCell id="6" value="" style="endArrow=none;dashed=1;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-100.00000000000023" y="1474.5799999999997" as="sourcePoint"/><mxPoint x="38.13000000000011" y="1474.5799999999997" as="targetPoint"/></mxGeometry></mxCell><mxCell id="7" value="遍历 ackList数组，针对 sn &amp;gt;= rcvNxt的数据，" style="text;strokeColor=none;fillColor=#CCCCCC;align=left;verticalAlign=middle;spacingLeft=4;spacingRight=4;overflow=hidden;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;rotatable=0;whiteSpace=wrap;spacingTop=-1;spacing=1;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1"><mxGeometry x="-340" y="1590" width="264.5" height="190" as="geometry"/></mxCell><mxCell id="8" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;设置&lt;b&gt;ackMask&lt;/b&gt;&lt;/font&gt;" style="whiteSpace=wrap;html=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1"><mxGeometry x="75.01" y="1630" width="130" height="60" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>